# Helm chart for Mezod

The chart contains configuration for testnet on Sepolia so far.
Eventually, it will be updated to support mainnet by default.

## Pre-requisites

### Secrets

The chart requires a secrets (variable `secrets.keyring`) to be created in the same namespace.
The following script is just an example. You can use any other method to create the secret.

```shell
# Choose a name for the secret
name=localkey

# Generate a random password
password="$(openssl rand -hex 32)"

# Generate a mnemonic
# You can use the following command to generate a mnemonic
# Get the latest version of $DOCKER_IMAGE from registry
mnemonic="$(docker run --rm -it --platform linux/amd64 --entrypoint="" <DOCKER_IMAGE> mezod keys mnemonic)"

kubectl -n <NAMESPACE> create secret generic <SECRET_NAME> \
  --from-literal=KEYRING_NAME="$name" \
  --from-literal=KEYRING_PASSWORD="$password" \
  --from-literal=KEYRING_MNEMONIC="$mnemonic"
```

---

> The following section is generated by Helm-docs (using pre-commit hook). Do not edit it manually.

# mezod

![Version: 0.0.1](https://img.shields.io/badge/Version-0.0.1-informational?style=flat-square) ![AppVersion: v0.1.0-rc1](https://img.shields.io/badge/AppVersion-v0.1.0--rc1-informational?style=flat-square)

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| image | string | `"us-central1-docker.pkg.dev/mezo-test-420708/mezo-staging-docker-public/mezod"` |  |
| tag | string | `"v0.1.0-rc1"` |  |
| env.NETWORK | string | `"testnet"` | Select the network to connect to |
| env.PUBLIC_IP | string | `"CHANGE_ME"` | Set public IP address of the validator |
| env.MEZOD_CHAIN_ID | string | `"mezo_31611-1"` | Set the chain ID (mezo_31611-1 is the testnet) |
| env.MEZOD_HOME | string | `"/var/mezod"` |  |
| env.MEZOD_MONIKER | string | `"CHANGE_ME"` | Set the moniker (name of the validator) |
| env.MEZOD_ETHEREUM_SIDECAR_SERVER | string | `"localhost:7500"` |  |
| env.MEZOD_ETHEREUM_SIDECAR_SERVER_ETHEREUM_NODE_ADDRESS | string | `"CHANGE_ME"` |  |
| env.MEZOD_LOG_LEVEL | string | `"info"` |  |
| env.MEZOD_LOG_FORMAT | string | `"json"` |  |
| env.MEZOD_CUSTOM_CONF_APP_TOML | string | `"/config/app.toml.txt"` |  |
| env.MEZOD_CUSTOM_CONF_CLIENT_TOML | string | `"/config/client.toml.txt"` |  |
| env.MEZOD_CUSTOM_CONF_CONFIG_TOML | string | `"/config/config.toml.txt"` |  |
| secrets.keyring | string | `"CHANGE_ME"` | Set Secret object containing the keyring information: KEYRING_NAME, KEYRING_PASSWORD, KEYRING_MNEMONIC |
| storage.className | string | `"CHANGE_ME"` |  |
| storage.size | string | `"1Gi"` |  |
| storage.useDataSource.enabled | bool | `false` | Enable and use to restore data from a snapshot or a PVC |
| storage.useDataSource.kind | string | `"PersistentVolumeClaim"` |  |
| storage.useDataSource.name | string | `""` |  |
| resources.requests.cpu | string | `"500m"` | Set the resource requests for the mezod container |
| resources.requests.memory | string | `"512Mi"` |  |
| securityContext.userId | int | `65532` | Set the user and group ID to run the container (don't change) |
| securityContext.groupId | int | `65532` |  |
| service.public.enabled | bool | `true` | Expose public ports to the Internet using LoadBalancer |
| service.public.annotations | object | `{}` |  |
| service.public.type | string | `"LoadBalancer"` |  |
| service.public.loadBalancerIP | string | `""` |  |
| service.public.allocateLoadBalancerNodePorts | bool | `false` |  |
| service.public.ports.p2p | int | `26656` |  |
| service.public.ports.rpc | int | `26657` |  |
| service.public.ports.api | int | `1317` |  |
| service.public.ports.grpc | int | `9090` |  |
| service.public.ports.json-rpc | int | `8545` |  |
| service.public.ports.json-rpc-ws | int | `8546` |  |
| service.private.enabled | bool | `true` | Expose private ports internally using ClusterIP |
| service.private.ports.evm-metrics.number | int | `6065` |  |
| service.private.ports.evm-metrics.path | string | `"/debug/metrics/prometheus"` |  |
| service.private.ports.comet-metrics.number | int | `26660` |  |
| service.private.ports.comet-metrics.path | string | `"/"` |  |
| customConfigs.enabled | bool | `false` | Optional: Load custom configuration from the files |
| customConfigs.appTomlTxt | string | `""` |  |
| customConfigs.clientTomlTxt | string | `""` |  |
| customConfigs.configTomlTxt | string | `""` |  |
| maintenanceMode | bool | `false` | Run shell in the container instead of the mezod process |
| priorityClassName | string | `""` |  |
| labels | object | `{}` |  |

